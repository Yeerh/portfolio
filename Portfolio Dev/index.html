<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Diego Dev</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cantora+One&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="icon" href="favicon_64x64.ico" type="image/x-icon" sizes="64x64" />
</head>
<body>
  <header class="main-header">
    <nav aria-label="Menu principal">
      <button id="open-sobre-modal" class="header-button">Sobre</button>
      <button class="header-button" id="btnMusica">Música</button>
      <button class="header-button">Tema</button>
    </nav>
  </header>

  <audio id="playerMusica" src="ｍａｇｉｃ (lofi hip hop).mp3"></audio>

  <canvas id="canvas"></canvas>

  <!-- Modal Sobre -->
  <div id="sobre-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1" style="display:none;">
    <div class="modal-content" role="document">
      <button class="close-modal" aria-label="Fechar modal">&times;</button>
      <h2 id="modal-title">Sobre Mim</h2>
      <p>Olá! Meu nome é Diego Ewerton, sou um Desenvolvedor Front-end de 21 anos, baseado em Recife, Pernambuco. Sou apaixonado por criar interfaces dinâmicas e responsivas usando HTML, CSS e JavaScript. Atualmente, estou no nível Junior e buscando crescer na área de desenvolvimento web. Adoro trabalhar em projetos criativos e aprender novas tecnologias!</p>
    </div>
  </div>

  <!-- Profile Card -->
  <section class="profile-card" id="home" tabindex="0" aria-label="Perfil de Diego Ewerton">
    <div class="profile-content">
      <div class="profile-image">
        <img src="images/icon.jpeg" alt="Foto de Diego Ewerton" class="profile-photo" />
      </div>
      <div class="profile-sidebar">
        <div class="profile-info">
          <h1>Diego Ewerton</h1>
          <p><strong>Profissão:</strong> Desenvolvedor Front-end</p>
          <p><strong>Idade:</strong> 21 Anos</p>
          <p><strong>Localidade:</strong> Recife, Pernambuco</p>
          <p><strong>Nível:</strong> Junior</p>
          <div class="profile-skills">
            <img src="images/javascript.png" alt="Ícone JavaScript" class="skill-icon" />
            <img src="images/html.png" alt="Ícone HTML" class="skill-icon" />
            <img src="images/css.png" alt="Ícone CSS" class="skill-icon" />
            <img src="images/node.png" alt="Ícone Node.js" class="skill-icon" />
            <img src="images/mysql.png" alt="Ícone MySQL" class="skill-icon" />
            <img src="images/react.png" alt="Ícone React" class="skill-icon" />
          </div>
        </div>
        <div class="profile-buttons">
          <a href="#" class="profile-button linkedin" aria-label="LinkedIn">
            <i class="bi bi-linkedin"></i> LinkedIn
          </a>
          <a href="#" class="profile-button github" aria-label="GitHub">
            <i class="bi bi-github"></i> GitHub
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Tabs -->
  <div class="tabs" role="tablist" aria-label="Alternar entre Projetos e Animações">
    <button class="tab-button active" id="tab-projetos" role="tab" aria-controls="projetos" aria-selected="true" tabindex="0">
      Projetos <i class="bi bi-terminal"></i>
    </button>
    <button class="tab-button" id="tab-animacoes" role="tab" aria-controls="animacoes" aria-selected="false" tabindex="-1">
      Animações
    </button>
  </div>

  <section id="projetos" class="section projects-section" aria-label="Projetos">
    <div class="projects-grid">
      <article class="project-card" tabindex="0" aria-label="Projeto 1">
        <h3 class="project-title">Projeto Zeda Link</h3>
        <img src="https://guildadosgamers.com.br/wp-content/uploads/2025/01/link-zelda.png" alt="Imagem do Projeto 1 - Link Zelda" class="project-image" />
        <div class="project-info">
          <p>Projeto Zeda Link é uma iniciativa para integrar elementos clássicos de jogos Zelda com funcionalidades modernas de web design. Utiliza tecnologias HTML, CSS e JavaScript para criar uma interface dinâmica e interativa.</p>
        </div>
      </article>
      <article class="project-card" tabindex="0" aria-label="Projeto 2">
        <h3 class="project-title">Projeto 2</h3>
        <img src="https://www.nintendo.com/eu/media/images/10_share_images/portals_3/2x1_SuperMarioHub.jpg" alt="Imagem do Projeto 2" class="project-image" />
        <div class="project-info">
          <p>Este projeto explora layouts responsivos e técnicas avançadas de CSS Grid para oferecer uma experiência de usuário fluida em múltiplos dispositivos.</p>
        </div>
      </article>
    </div>
  </section>

  <section id="animacoes" class="section animations-section" aria-label="Animações" style="display:none;">
    <div class="projects-grid">
      <article class="project-card" tabindex="0" aria-label="Animação 1">
        <h3 class="project-title">Animação 1</h3>
        <img src="images/animation1-placeholder.jpg" alt="Imagem da Animação 1" class="project-image" />
        <p>Descrição breve da animação 1.</p>
        <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Ver Animação 1">Ver animação</a>
      </article>
      <article class="project-card" tabindex="0" aria-label="Animação 2">
        <h3 class="project-title">Animação 2</h3>
        <img src="images/animation2-placeholder.jpg" alt="Imagem da Animação 2" class="project-image" />
        <p>Descrição breve da animação 2.</p>
        <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Ver Animação 2">Ver animação</a>
      </article>
    </div>
  </section>

  <script src="https://esm.sh/tweakpane@4.0.3"></script>
  <script>
    // Matrix Animation (igual ao seu original)
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    let state = {
      fps: 20,
      color: "#1c4c7d",
      charset: "01",
      size: 25
    };

    let w, h, p;
    const resize = () => {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
      p = Array(Math.ceil(w / state.size)).fill(0);
    };
    window.addEventListener("resize", resize);
    resize();

    const random = (items) => items[Math.floor(Math.random() * items.length)];

    const draw = () => {
      ctx.fillStyle = "rgba(0,0,0,.05)";
      ctx.fillRect(0, 0, w, h);
      ctx.fillStyle = state.color;
      ctx.font = `${state.size}px monospace`;
      for (let i = 0; i < p.length; i++) {
        let v = p[i];
        ctx.fillText(random(state.charset), i * state.size, v);
        p[i] = v >= h || v >= 10000 * Math.random() ? 0 : v + state.size;
      }
    };

    let prevTime = performance.now();
    const animate = (currTime) => {
      const deltaTime = currTime - prevTime;
      const interval = 1000 / state.fps;
      if (deltaTime >= interval) {
        draw();
        prevTime = currTime - (deltaTime % interval);
      }
      requestAnimationFrame(animate);
    };
    requestAnimationFrame(animate);

    // Tabs
    const tabProjetos = document.getElementById('tab-projetos');
    const tabAnimacoes = document.getElementById('tab-animacoes');
    const secProjetos = document.getElementById('projetos');
    const secAnimacoes = document.getElementById('animacoes');

    function activateTab(tabToActivate) {
      if (tabToActivate === 'projetos') {
        tabProjetos.classList.add('active');
        tabProjetos.setAttribute('aria-selected', 'true');
        tabProjetos.tabIndex = 0;

        tabAnimacoes.classList.remove('active');
        tabAnimacoes.setAttribute('aria-selected', 'false');
        tabAnimacoes.tabIndex = -1;

        secProjetos.style.display = 'block';
        secAnimacoes.style.display = 'none';
      } else {
        tabAnimacoes.classList.add('active');
        tabAnimacoes.setAttribute('aria-selected', 'true');
        tabAnimacoes.tabIndex = 0;

        tabProjetos.classList.remove('active');
        tabProjetos.setAttribute('aria-selected', 'false');
        tabProjetos.tabIndex = -1;

        secAnimacoes.style.display = 'block';
        secProjetos.style.display = 'none';
      }
    }

    tabProjetos.addEventListener('click', () => activateTab('projetos'));
    tabAnimacoes.addEventListener('click', () => activateTab('animacoes'));

    // Modal + trap focus
    const modal = document.getElementById('sobre-modal');
    const openModalBtn = document.getElementById('open-sobre-modal');
    const closeModalBtn = modal.querySelector('.close-modal');

    // Get all focusable elements in modal
    function getFocusableElements() {
      return modal.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])');
    }

    openModalBtn.addEventListener('click', (e) => {
      e.preventDefault();
      modal.style.display = 'block';
      modal.setAttribute('aria-hidden', 'false');
      // focus primeiro elemento focável dentro do modal
      const focusableElements = getFocusableElements();
      if (focusableElements.length) {
        focusableElements[0].focus();
      }
    });

    closeModalBtn.addEventListener('click', () => {
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden', 'true');
      openModalBtn.focus();
    });

    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        openModalBtn.focus();
      }
    });

    // Trap focus no modal
    modal.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        modal.style.display = 'none';
        modal.setAttribute('aria-hidden', 'true');
        openModalBtn.focus();
      }

      if (e.key === 'Tab') {
        const focusableElements = getFocusableElements();
        if (focusableElements.length === 0) return;

        const firstEl = focusableElements[0];
        const lastEl = focusableElements[focusableElements.length - 1];
        if (e.shiftKey) {
          // shift + tab
          if (document.activeElement === firstEl) {
            e.preventDefault();
            lastEl.focus();
          }
        } else {
          // tab
          if (document.activeElement === lastEl) {
            e.preventDefault();
            firstEl.focus();
          }
        }
      }
    });

    // Scroll header hide/show
    let lastScrollTop = 0;
    const header = document.querySelector('.main-header');
    window.addEventListener('scroll', () => {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

      if (scrollTop > lastScrollTop) {
        header.classList.add('hide');
      } else {
        header.classList.remove('hide');
      }

      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
    });

    // Botão Música
    const btnMusica = document.getElementById('btnMusica');
    const player = document.getElementById('playerMusica');
    let tocando = false;

    btnMusica.addEventListener('click', () => {
      if (!tocando) {
        player.play();
        btnMusica.textContent = 'Pausar Música';
      } else {
        player.pause();
        btnMusica.textContent = 'Música';
      }
      tocando = !tocando;
    });
  </script>
</body>
</html>
